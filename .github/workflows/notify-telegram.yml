name: Notify Telegram on Release

on:
  release:
    types: [published]

jobs:
  notify-telegram:
    runs-on: ubuntu-latest
    steps:
      # –û—Ç–ª–∞–¥–æ—á–Ω—ã–π —à–∞–≥: –≤—ã–≤–µ—Å—Ç–∏ –≤ –ª–æ–≥ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ —Å–µ–∫—Ä–µ—Ç–æ–≤
      - name: Debug print Telegram secrets
        env:
          TELEGRAM_TOKEN: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          CHAT_ID: ${{ secrets.TELEGRAM_CHAT_ID }}
          TOPIC_ID: ${{ secrets.TELEGRAM_TOPIC_ID }}
        run: |
          echo "TELEGRAM_TOKEN=${TELEGRAM_TOKEN}"
          echo "CHAT_ID=${CHAT_ID}"
          echo "TOPIC_ID=${TOPIC_ID}"

      # –®–∞–≥ —Å –æ—Ç–ø—Ä–∞–≤–∫–æ–π —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
      - name: Send Telegram Notification
        uses: appleboy/telegram-action@v0.1.0
        with:
          to: ${{ secrets.TELEGRAM_CHAT_ID }}
          token: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          message: |
            üöÄ Project: ${{ github.repository }}
            üõ†Ô∏è Release: ${{ github.event.release.tag_name }}
            üìù Message:
            ${{ github.event.release.body }}

            üîó Repository: ${{ github.event.repository.html_url }}
          thread_id: ${{ secrets.TELEGRAM_TOPIC_ID }}
